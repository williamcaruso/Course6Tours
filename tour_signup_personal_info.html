<!DOCTYPE html>

<scripts src="scripts.js"></scripts>
<html>
  <head>
    <meta charset="utf-8">
    <title>Course 6 Tours</title>
    <meta name="description"
          content="The website to schedule tours for visiting the Electrical Engineering and Computer Science Department at MIT (aka Course 6)." />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Codeply">



    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" />
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />

    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body >
    <nav class="navbar navbar-fixed-top navbar-toggleable-sm navbar-inverse bg-primary mb-3">

    <div class="flex-row d-flex">
        <a class="navbar-brand mb-1" href="index.html"><img src="graphics/VI-Logo.svg" width="30" height="30">&nbsp;&nbsp;Course 6 Tours</a>
        <button type="button" class="hidden-md-up navbar-toggler pull-right" data-toggle="offcanvas" title="Toggle responsive left sidebar">
            <span class="navbar-toggler-icon"></span>
        </button>
    </div>
</nav>
<div class="container-fluid" id="main">
    <div class="row row-offcanvas row-offcanvas-left">
        <div class="col-md-3 col-lg-2 sidebar-offcanvas" id="sidebar" role="navigation">
            <ul class="nav flex-column pl-1">
                <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                <li class="nav-item"><a class="nav-link" href="map_location.html">Campus Map</a></li>
                <li class="nav-item"><a class="nav-link" href="faq.html">FAQ</a></li>
                <li class="nav-item"><a class="nav-link" href="contact_page.html">Contact</a></li>
                <li class="nav-item"><a class="active nav-link" href="tour_signup_personal_info.html">Schedule Tour</a></li>
            </ul>
        </div>
        <!--/col-->

        <div class="col-xs-12 col-md-9 col-lg-10 main">

            <h1 class="">MIT Course 6 Tour Request</h1>
            <p class="lead hidden-xs-down">The Department of Electrical Engineering and Computer Science</p>

            <div class="row">

                <div class="mdl-card mdl-shadow--2dp">
                    <div class="mdl-card__supporting-text">
                        <div class="mdl-stepper-horizontal-alternative active-step">
                            <div class="mdl-stepper-step active-step">
                                <a href="tour_signup_personal_info.html" onclick='save()' id="info" class='btn disabled'>
                                    <div class="mdl-stepper-circle"><span>1</span></div>
                                    <div class="mdl-stepper-title">Personal Info</div>
                                    <div class="mdl-stepper-bar-left"></div>
                                    <div class="mdl-stepper-bar-right"></div>
                                </a>
                            </div>
                            <div class="mdl-stepper-step">
                                <a href = "tour_signup_schedul.html" onclick="save()" id="sched" class='btn disabled'>
                                    <div class="mdl-stepper-circle"><span>2</span></div>
                                    <div class="mdl-stepper-title">Pick Your Dates</div>
                                    <div class="mdl-stepper-bar-left"></div>
                                    <div class="mdl-stepper-bar-right"></div>
                                </a>
                            </div>
                            <div class="mdl-stepper-step">
                                <a href="tour_signup_review.html" onclick="save()" id="rev" class= 'btn disabled'>
                                    <div class="mdl-stepper-circle"><span>3</span></div>
                                    <div class="mdl-stepper-title">Review</div>
                                    <div class="mdl-stepper-bar-left"></div>
                                    <div class="mdl-stepper-bar-right"></div>
                                </a>
                            </div>
                            <div class="mdl-stepper-step">
                                <a href="tour_signup_confirm.html"  onclick="save()" id="conf" class= 'btn disabled'>
                                    <div class="mdl-stepper-circle"><span>4</span></div>
                                    <div class="mdl-stepper-title">Confirmation</div>
                                    <div class="mdl-stepper-bar-left"></div>
                                    <div class="mdl-stepper-bar-right"></div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div id="personal_info_form">

                    <form class="">

                        <div class="form-group row">
                            <label for="name" class="col-2 col-form-label">Name:</label>
                            <div class="col-10">
                                <input required class="form-control" id="name" type="text" name="name"
                                       placeholder="e.g. Ben Bitdiddle"
                                        size=50>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="email" class="col-2 col-form-label">Email:</label>
                            <div class="col-10">
                                <input required class="form-control" id="email" type="text" name="email"
                                       placeholder="e.g. Bitdiddle@mit.edu"
                                       size=50>
                            </div>
                        </div>

                        <div class="" id="names">
                            <button class="btn btn-primary" id="add_visitor" type="button">Add Another Visitor</button>
                            <br>
                            <br>
                        </div>
                        <br>
                        <div id="special"> Special Requests: </div>
                        <div class="checkbox">
                            <label><input type="checkbox" value="" name="accessible" id="accessible-choice"> Handicap Accessible Tour</label>
                        </div>
                        <div class="checkbox">
                            <label><input type="checkbox" value="" name="ee" id="ee-choice"> Electrical Engineering Focused
                                Tour</label>
                        </div>
                        <div class="checkbox">
                            <label><input type="checkbox" value="" name="cs" id="cs-choice"> Computer Science Focused Tour</label>
                        </div>

                    </form>
                </div>

                <div class='forwardBack'>
                    <a href="tour_signup_schedul.html"class="btn btn-primary pull-right" id="submitPersonalInfo" float="right">Next</a>
                </div>

            </div>
            <!--/row-->

            <br>
            <hr>
        </div>

        <!--/main col-->
    </div>

</div>
<!--/.container-->
<footer class="container-fluid">
    <p class="text-right small">Â©2017 MIT EECS</p>
</footer>


    <!--scripts loaded here-->
    
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/tether/1.2.0/js/tether.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js"></script>
    
    <script src="js/scripts.js"></script>


    <script>

            function save(){
                var requestorName = $("#name").val();
                var requestorEmail = $("#email").val();
                var additionalVisitors = [];
                var visitors = document.getElementsByClassName("extraVisitor");
                for(var i=0; i<visitors.length; i++) {
                   additionalVisitors.push(visitors[i].value);
                }
                var handicap = $("#accessible-choice").is(':checked');
                var eePref = $("#ee-choice").is(':checked');
                var csPref = $("#cs-choice").is(':checked');
                if (typeof(Storage) !== "undefined") {
                    var dataObject = JSON.parse(localStorage.getItem('personal_info_model'));
                    dataObject.visited_page_1 = true;
                    dataObject.name = requestorName;
                    dataObject.email = requestorEmail;
                    dataObject.visitors = additionalVisitors;
                    dataObject.handicap = handicap;
                    dataObject.prefer_ee = eePref;
                    dataObject.prefer_cs = csPref;
                    localStorage.setItem('personal_info_model', JSON.stringify(dataObject));

                } else {
                    console.log("Unable to store form values.");
                }
            }
            var dataObject = JSON.parse(localStorage.getItem("personal_info_model"));
            if (typeof(dataObject) !== 'undefinted' || typeof(dataObject) !== 'null') {
                dataObject.name ? $('#name').val(dataObject.name) : '';
                dataObject.email ? $('#email').val(dataObject.email) : '';

                 for (var i=0; i < dataObject.visitors.length; i++) {

                     if(dataObject.visitors[i] != "removed" & dataObject.visitors[i] != "null"){
                        console.log(i)
                        var visitorFormGroup = '<div id=' + i + ' class="form-group row"> <label for="visitor" class="col-2' +' col-form-label">Name:</label> <div class="col-10"> <input class="form-control extraVisitor" type="text" ' +' name="visitor" placeholder="e.g. Alyssa Hacker"> <button name="remove" class="btn btn-primary" id="remove' + i + '"" type="button"> Remove </button> </div> </div>';
                        $(visitorFormGroup).appendTo("#names");
                     

                     }
                 }

                var visitors = document.getElementsByClassName("extraVisitor");

                entered = 0
                for(var j=0; j<dataObject.visitors.length; j++) {
                        name = dataObject.visitors[j]
                        if( name != "removed" & name != "null"){
                        visitors[entered].value = name;
                        entered += 1
                    }
                }

                if (dataObject.handicap) {
                    $('#accessible-choice').prop('checked', true);
                }
                if (dataObject.prefer_ee) {
                    $('#ee-choice').prop('checked', true);
                }
                if (dataObject.prefer_cs) {
                    $('#cs-choice').prop('checked', true);
                }

                //enable appropriate breadcrumbs based off which pages have been visited

                console.log(dataObject)
                if(dataObject.visited_page_1){
                    d = document.getElementById("info")
                    d.className = "btn"
                }
                if(dataObject.visited_page_2){
                    d = document.getElementById("sched")
                    d.className = "btn"
                }
                if(dataObject.visited_page_3){
                    d = document.getElementById("rev")
                    d.className = "btn"
                }
                if(dataObject.visited_page_4){
                    d = document.getElementById("conf")
                    d.className = "btn"
                }

            }

    </script>

  </body>
</html>

